<main class="lesson-list-container">
  <header class="lesson-list-header">
    <button class="back-button" (click)="goToHome()" aria-label="Go back to home">‚Üê Back</button>
    <h1>{{ levelTitle() }}</h1>
  </header>

  @if (loading()) {
  <div class="loading" role="status" aria-live="polite">
    <p>Loading lessons...</p>
  </div>
  } @else if (lessons().length === 0) {
  <div class="empty-state">
    <p>No lessons available for this level.</p>
    <button class="button-primary" (click)="goToHome()">Go to Home</button>
  </div>
  } @else {
  <section class="lessons-grid" role="list">
    @for (lesson of lessons(); track lesson.id) {
    <article
      class="lesson-card"
      role="listitem"
      (click)="goToLesson(lesson.id)"
      (keydown.enter)="goToLesson(lesson.id)"
      (keydown.space)="goToLesson(lesson.id)"
      tabindex="0"
      [attr.aria-label]="getLessonTypeLabel(lesson.type) + ': ' + lesson.gurmukhi"
    >
      <div class="lesson-type" aria-hidden="true">
        {{ getLessonTypeLabel(lesson.type) }}
      </div>
      <div class="lesson-gurmukhi">{{ getLessonDisplayContent(lesson) }}</div>
      @if (lesson.transliteration && !(lesson.type === 'paragraph' || lesson.type === 'story')) {
      <div class="lesson-transliteration" aria-hidden="true">
        {{ lesson.transliteration }}
      </div>
      }
    </article>
    }
  </section>
  }
</main>
